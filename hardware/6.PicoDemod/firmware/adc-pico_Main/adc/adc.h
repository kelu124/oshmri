//!
//! \file       adc.h
//! \author     Abdelrahman Ali
//! \date       2024-04-28
//!
//! \brief      adc pio.
//!

#ifndef ADC_H
#define ADC_H

//---------------------------------------------------------------------------
// INCLUDES
//---------------------------------------------------------------------------

#include <stdio.h>
#include <stdlib.h>
#include "pico/stdlib.h"
#include "hardware/pio.h"
#include "hardware/adc.h"
#include "hardware/gpio.h"
#include "hardware/clocks.h"

//---------------------------------------------------------------------------
// CONSTANTS
//---------------------------------------------------------------------------

#define LO_Q 0
#define LO_I 1
#define SAMPLE_COUNT 400
#define LO_CLK 16000000

#define ADC0 26
#define ADC1 27

#define ADC_NUM0 0
#define ADC_NUM1 1

#define ADC_VREF 3.3
#define ADC_RANGE (1 << 12)
#define ADC_CONVERT (ADC_VREF / (ADC_RANGE - 1))

#define IN_CH 8
#define CHSEL 9
#define DOUTA 15
#define DOUTB 10
#define CS 13
#define SCLK 14

//---------------------------------------------------------------------------
// LO INIT FUNCTION
//---------------------------------------------------------------------------

void pio_lo_init();

//---------------------------------------------------------------------------
// PICO ADC INIT FUNCTION
//---------------------------------------------------------------------------
void pico_adc_init();

//---------------------------------------------------------------------------
// ADC MAX GPIO INIT FUNCTION
//---------------------------------------------------------------------------
void adc_max_gpio_init();

//---------------------------------------------------------------------------
// GPIO delays
//---------------------------------------------------------------------------
void delay_50ns();
void delay_250ns();

//---------------------------------------------------------------------------
// GET ADC0 FUNCTION
//---------------------------------------------------------------------------
void get_adc0(uint16_t i);

//---------------------------------------------------------------------------
// GET ADC1 FUNCTION
//---------------------------------------------------------------------------
void get_adc1(uint16_t i);

//---------------------------------------------------------------------------
// GET DOUTA FUNCTION
//---------------------------------------------------------------------------
void get_douta(uint16_t i);

//---------------------------------------------------------------------------
// GET DOUTB FUNCTION
//---------------------------------------------------------------------------
void get_doutb(uint16_t i);

//---------------------------------------------------------------------------
// ADC MAIN FUNCTION
//---------------------------------------------------------------------------

void adc();

//---------------------------------------------------------------------------
// END OF FILE
//---------------------------------------------------------------------------

#endif
